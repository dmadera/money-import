#!/bin/bash
DATA='<!--ADDED BY SCRIPT-->
    <xs:element name="ObsahPolozky" minOccurs="0">
        <xs:complexType>
            <xs:all>
                <xs:element name="Artikl_ID" minOccurs="0" />
                <xs:element name="Sklad_ID" minOccurs="0" />
            </xs:all>
            <xs:attribute name="GENERATEZASOBA" type="string_60" />
        </xs:complexType>
    </xs:element>
<!--ADDED BY SCRIPT END-->'

ESCAPED=`echo "${DATA}" | sed -r ':a;N;$!ba;s|\n|\\\|g' | sed 's|/|\\\/|g'`

for n in xsd/*.xsd; do 
    sed -i -r "s/^.+ObsahPolozky_ID.+$/${ESCAPED}/mg" ${n} ;
    xsd ${n} /c /o:xsd-classes /n:$(basename ${n} .xsd) ;
    mv xsd-classes/$(basename ${n} .xsd).cs xsd-classes/XSD_$(basename ${n} .xsd).cs ;
done